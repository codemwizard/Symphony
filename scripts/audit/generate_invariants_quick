#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"
EVIDENCE_DIR="$ROOT_DIR/evidence/phase0"
EVIDENCE_FILE="$EVIDENCE_DIR/invariants_quick.json"

mkdir -p "$EVIDENCE_DIR"

python3 "$ROOT_DIR/scripts/audit/generate_invariants_quick.py" > "$ROOT_DIR/docs/invariants/INVARIANTS_QUICK.md"

python3 - <<PY
import json
from pathlib import Path
out = {"status": "pass"}
Path("$EVIDENCE_FILE").write_text(json.dumps(out, indent=2))
PY
