phase: "1"
task_id: "TSK-P1-003"
title: "Agent Conformance Verification"
owner_role: "QA_VERIFIER"
depends_on:
  - "TSK-P1-001"
  - "TSK-P1-002"
touches:
  - "scripts/audit/verify_agent_conformance.sh"
  - "docs/operations/AGENT_ROLE_RECONCILIATION.md"
  - ".codex/agents/**/*.md"
  - ".cursor/agents/**/*.md"
invariants: []
work:
  - "Write `scripts/audit/verify_agent_conformance.sh` to ensure each agent file references the canonical agent contract and includes the mapped Phase-1 role name."
  - "Ensure the script fails if a production-affecting task lacks a plan/log/approval artifact or if any agent prompt diverges."
  - "Wire the script into `scripts/dev/pre_ci.sh` and CI to run before merges."
acceptance_criteria:
  - "The verification script runs in pre-CI/CI and emits evidence under `evidence/phase1/agent_conformance.json`."
  - "No agent file can be merged without referencing the master contract text."
verification_commands:
  - "scripts/audit/verify_agent_conformance.sh"
evidence_artifacts:
  - "evidence/phase1/agent_conformance.json"
failure_modes:
  - "Agent files lacking master contract reference."
  - "Missing evidence metadata for approvals."
status: "in_progress"
must_read: []
evidence: []
verification: []
client: "codex_cli"
assigned_agent: "qa_verifier"
model: "<UNASSIGNED>"
