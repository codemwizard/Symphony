phase: '0'
task_id: TSK-P0-081
title: Add external proofs Phase-0 hook (append-only)
owner_role: DB_FOUNDATION
status: planned
depends_on:
- TSK-P0-073
touches:
- schema/migrations/**
- scripts/db/**
- tasks/TSK-P0-081/meta.yml
invariants:
- INV-091 (Third-party proof hook exists)
work:
- Add a forward-only migration creating external_proofs bound to ingress attestation identifiers.
- Store provider refs and request/response hashes without introducing runtime resolver behavior.
- Enforce append-only semantics.
acceptance_criteria:
- external_proofs exists with attestation linkage and hash metadata.
- UPDATE/DELETE mutation is blocked.
verification:
- scripts/db/verify_invariants.sh
- scripts/db/tests/test_db_functions.sh
evidence:
- evidence/phase0/business_foundation_hooks.json
failure_modes:
- External proofs table missing.
- Proof mutation is possible via UPDATE/DELETE.
- Evidence file missing.
must_read:
- docs/PHASE0/BUSINESS_INVARIANTS_ADDITION_IMPLEMENTATION.md
- docs/plans/phase0/TSK-P0-080_business_invariants_addition/PLAN.md
implementation_plan: ''
implementation_log: ''
notes: ''
client: codex_cli
assigned_agent: db_foundation
model: <UNASSIGNED>
