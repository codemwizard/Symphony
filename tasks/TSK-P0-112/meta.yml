# Canonical Task Meta Template (lower_snake_case)

phase: "0"
task_id: "TSK-P0-112"
title: "Wire outbox semantics tests into local pre-ci and CI DB job"
owner_role: "SECURITY_GUARDIAN"
status: "completed"   # planned | in_progress | completed

depends_on:
  - "TSK-P0-110"
  - "TSK-P0-111"

touches:
  - "scripts/dev/pre_ci.sh"
  - ".github/workflows/invariants.yml"

invariants:
  - "INV-011"
  - "INV-012"
  - "INV-013"

work:
  - "Run idempotency + outbox semantics tests in pre-ci so pre-push matches CI failure modes."
  - "Add CI DB job steps for new tests and ensure evidence artifacts are uploaded."

acceptance_criteria:
  - "`scripts/dev/pre_ci.sh` runs the new tests and stays green."
  - "CI DB job runs the new tests."

verification:
  - "scripts/dev/pre_ci.sh"

evidence: []

failure_modes:
  - "Pre-ci passes but CI fails (parity drift)"

must_read:
  - "docs/operations/DEV_WORKFLOW.md"

implementation_plan: "docs/plans/phase0/TSK-P0-109_invariant_implemented_alignment/PLAN.md"
implementation_log: "docs/plans/phase0/TSK-P0-109_invariant_implemented_alignment/EXEC_LOG.md"

notes: ""
client: "codex_cli"
assigned_agent: "security_guardian"
model: "gpt-5.3-codex"
